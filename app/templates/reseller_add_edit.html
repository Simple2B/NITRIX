{% extends "base_add_edit.html" %}

{% block reseller_edit %}
<div class="container ">
  <form action="{{form.save_route}}" method="POST" id="main-form">
    <div class="row pl-3 pb-3">
      {% if form.is_edit %}
      <h1>Reseller edit</h1>
      {% else %}
      <h1>Reseller add</h1>
      {% endif %}
    </div>
    <div class="form-group row">
      {{form.id(type='hidden')}}
      {{form.name.label(class="col-sm-4 col-form-label")}}
      <div class="col-sm-8">
        {{form.name(class='form-control')}}
      </div>
    </div>
    <div class="form-group row">
      {{form.status.label(class="col-sm-4 col-form-label")}}
      <div class="col-sm-8">
        {{form.status(class='form-control')}}
      </div>
    </div>
    <div class="form-group row">
      {{form.comments.label(class="col-sm-4 col-form-label")}}
      <div class="col-sm-8">
        {{form.comments(class='form-control')}}
      </div>
    </div>
  </form>
  {% if form.is_edit and form.product_forms %}
  <div class="form-group row">
    <label class="col-sm-5 col-form-label">Product</label>
    <label class="col-sm-2 col-form-label">Months</label>
    <label class="col-sm-2 col-form-label">Init Price</label>
    <label class="col-sm-2 col-form-label">Ext Price</label>
  </div>
  {% for prod_form in form.product_forms %}

  <form action="{{url_for('reseller.save_product')}}" method="POST">
    <div class="form-group row">
      {{prod_form.id(type='hidden')}}
      {{prod_form.reseller_id(type='hidden')}}
      <!-- {{prod_form.product_id.label(class="col-sm-2 col-form-label")}} -->
      <div class="col-sm-5">
          {% for record in form.products %}
          {% if record.id == prod_form.product_id.data %}
          <input type="text" class="form-control" value="{{ record.name}}" readonly>
          {% endif %}
          {% endfor %}
      </div>
      <div class="col-sm-2"><input type="text" class="form-control" value="{{prod_form.months.data}}" readonly></div>
      <div class="col-sm-2"> <input type="text" class="form-control" value="{{prod_form.init_price.data}}" readonly> </div>
      <div class="col-sm-2"> <input type="text" class="form-control" value="{{prod_form.ext_price.data}}" readonly> </div>
      <!-- <div class="col-sm-2">
        {{prod_form.submit(class="btn btn-success", value="v")}}
        {{prod_form.submit(class="btn btn-danger", value="-")}}
      </div> -->
    </div>
  </form>
  {% endfor %}
  {% endif %}
  {% if form.is_edit %}
  <div class="row">
  <a href="{{url_for('reseller.add_reseller_product')}}?id={{ form.id.data }}" type="button" class="btn btn-primary btn-lg btn-block">Add/Edit product</a>
  </div>
  {%endif%}
</div>
{% endblock %}