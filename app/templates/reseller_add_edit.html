{% extends "base_add_edit.html" %}

{% block reseller_edit %}
<div class="container ">
  <form action="{{form.save_route}}" method="POST" id="main-form">
    <div class="row pl-3 pb-3">
      {% if form.is_edit %}
      <h1>Reseller edit</h1>
      {% else %}
      <h1>Reseller add</h1>
      {% endif %}
    </div>
    <div class="form-group row">
      {{form.id(type='hidden')}}
      {{form.name.label(class="col-sm-3 col-form-label")}}
      <div class="col-sm-9">
        {{form.name(class='form-control')}}
      </div>
    </div>
    <div class="form-group row">
      {{form.status.label(class="col-sm-3 col-form-label")}}
      <div class="col-sm-9">
        {{form.status(class='form-control')}}
      </div>
    </div>
    <div class="form-group row">
      {{form.comments.label(class="col-sm-3 col-form-label")}}
      <div class="col-sm-9">
        {{form.comments(class='form-control')}}
      </div>
    </div>
  </form>
  {% if form.is_edit %}
  <div class="form-group row">
    <label class="col-sm-6 col-form-label">Product</label>
    <label class="col-sm-2 col-form-label">Months</label>
    <label class="col-sm-2 col-form-label">Price</label>
  </div>
  {% for prod_form in form.product_forms %}
  <form action="{{url_for('reseller.save_product')}}" method="POST">
    <div class="form-group row">
      {{prod_form.id(type='hidden')}}
      {{prod_form.reseller_id(type='hidden')}}
      <!-- {{prod_form.product_id.label(class="col-sm-2 col-form-label")}} -->
      <div class="col-sm-6">
        <select class="form-control" name="product_id">
          {% for record in form.products %}
          {% if record.id == prod_form.product_id.data %}
          <option value="{{record.id}}" selected>{{ record.name }}</option>
          {% else %}
          <option value="{{record.id}}">{{ record.name }}</option>
          {% endif %}
          {% endfor %}
        </select>
      </div>
      <div class="col-sm-2"> {{prod_form.months(class="form-control")}} </div>
      <div class="col-sm-2"> {{prod_form.price(class="form-control")}} </div>
      <div class="col-sm-2"> {{prod_form.submit(class="btn btn-success")}} </div>
    </div>
  </form>
  {% endfor %}

  <form action="{{url_for('reseller.save_product')}}" method="POST">
    <div class="form-group row">
      <input id="id" name="id" type="hidden" value="-1">
      <input id="reseller_id" name="reseller_id" type="hidden" value="{{form.id.data}}">
      <div class="col-sm-6">
        <select class="form-control" name="product_id">
          {% for record in form.products %}
          <option value="{{record.id}}">{{ record.name }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-sm-2">
        <input class="form-control" id="months" name="months" required="" type="text" placeholder="?">
      </div>
      <div class="col-sm-2">
        <input class="form-control" id="price" name="price" required="" type="text" placeholder="0.00">
      </div>
      <div class="col-sm-2">
        <input class="btn btn-primary" id="submit" name="submit" type="submit" value="Add">
      </div>
    </div>

  </form>
  {% endif %}
</div>



{% endblock %}